<!DOCTYPE html>
<html>
<head>
    <title>ClawQuest Modular - v7.3 Mobile</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="evolutionAlert">ENEMIES EVOLVED!</div>
    
    <!-- HUD Unificado Profissional -->
    <div id="mainHUD">
        <div class="hud-row">
            <span class="hud-label">Vitality</span>
            <div class="bar-container">
                <div id="hpFill" class="bar-fill" style="width: 100%;"></div>
            </div>
        </div>

        <div class="hud-row">
            <span class="hud-label">Energy Bars</span>
            <div id="staminaArea"></div>
        </div>

        <!-- Novas Cargas -->
        <div class="hud-row">
            <span class="hud-label">Stamina Boosts</span>
            <div id="boostHUD" class="charge-group"></div>
        </div>

        <div class="hud-row">
            <span class="hud-label">EMP Pulse Charges</span>
            <div id="pemHUD" class="charge-group"></div>
        </div>
    </div>

    <div id="interactHint">PRESS [E] TO OPEN</div>
    
    <div id="ui">
        <div class="stat-box"><span class="label">Scrap</span><span id="scrapVal" class="value">0</span></div>
        <div class="stat-box"><span class="label">Ammo</span><span id="ammoVal" class="value">30</span></div>
        <div class="stat-box"><span class="label">Shield</span><span id="shieldVal" class="value">OFF</span></div>
        <div class="stat-box"><span class="label">Kills</span><span id="killVal" class="value">0</span></div>
    </div>

    <div id="radarContainer"><canvas id="radarCanvas" width="150" height="150"></canvas></div>

    <!-- Controles Mobile (Joysticks Virtuais) -->
    <div id="mobileControls" style="display: none;">
        <div id="joystickMove" class="joystick-base">
            <div class="joystick-stick"></div>
        </div>
        <div id="joystickShoot" class="joystick-base">
            <div class="joystick-stick"></div>
        </div>
        <div id="mobileButtons">
            <div id="btnPemMobile" class="mobile-action-btn">PEM</div>
            <div id="btnBoostMobile" class="mobile-action-btn">BST</div>
        </div>
    </div>

    <div id="inventory">
        <div style="font-family:'Press Start 2P'; color:#00ff00; margin-bottom:20px;">DEBUG INVENTORY</div>
        <div class="inv-grid">
            <div class="inv-item" onclick="spawnDebugItem('ammo')"><div class="inv-icon" style="background: #ffff00;"></div> AMMO</div>
            <div class="inv-item" onclick="spawnDebugItem('health')"><div class="inv-icon" style="background: #ff3333;"></div> HEALTH</div>
            <div class="inv-item" onclick="spawnDebugItem('shield')"><div class="inv-icon" style="background: #0066ff;"></div> SHIELD</div>
            <div class="inv-item" onclick="spawnDebugItem('orbe')"><div class="inv-icon" style="background: #00ff00;"></div> ADD BLADE</div>
            <div class="inv-item" onclick="spawnDebugItem('pem')"><div class="inv-icon" style="background: #00ccff;"></div> ADD PEM</div>
            <div class="inv-item" onclick="spawnDebugItem('boost')"><div class="inv-icon" style="background: #ffff00;"></div> ADD BOOST</div>
            <div class="inv-item" onclick="toggleInventory()"><div class="inv-icon" style="background: #444;"></div> CLOSE</div>
        </div>
    </div>

    <div id="mainMenu">
        <div id="menuPoster"></div>
        <div class="menu-side">
            <div class="pixel-title">CLAW QUEST</div>
            
            <!-- Seletor de Skins -->
            <div class="skin-selector" style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 20px;">
                <button class="btn-arrow" onclick="changeSkin(-1)" style="background:none; border:none; color:#00ff00; font-size:24px; cursor:pointer; font-family:'Press Start 2P';"> < </button>
                <div class="preview-box" style="width: 100px; height: 100px; background: rgba(0,255,0,0.05); border: 2px solid #00ff00; display: flex; align-items: center; justify-content: center; border-radius: 10px;">
                    <img id="skinPreview" src="" style="max-width: 80%; max-height: 80%; object-fit: contain;">
                </div>
                <button class="btn-arrow" onclick="changeSkin(1)" style="background:none; border:none; color:#00ff00; font-size:24px; cursor:pointer; font-family:'Press Start 2P';"> > </button>
            </div>

            <div id="lastStats" style="display:none; margin-bottom:20px; font-family:'Press Start 2P'; font-size:10px;"><span id="lastResult" style="color:#00ff00;"></span></div>
            <div id="configs" style="width: 100%;">
                <div class="config-group"><label>SPD: <span id="vSpeed">2.5</span></label><input type="range" id="inpSpeed" min="1" max="6" step="0.1" value="2.5"></div>
                <div class="config-group"><label>LOOT: <span id="vLoot">1</span>x</label><input type="range" id="inpLoot" min="1" max="10" step="1" value="1" oninput="document.getElementById('vLoot').innerText = this.value"></div>
                <div class="config-group"><label>DIFF: <span id="vSpawn">1</span>x</label><input type="range" id="inpSpawn" min="1" max="10" step="1" value="1"></div>
            </div>
            <button class="btn" onclick="startGame(false)">START MISSION</button>
            <button class="btn" style="background:#0066ff; color:#fff;" onclick="startGame(true)">TRAINING GROUND</button>
        </div>
    </div>

    <div id="gameOver" class="menu-side" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.85); border: 2px solid #ff3333; padding: 40px; border-radius: 15px; text-align: center; z-index: 9999; backdrop-filter: none; width: auto;">
        <div class="pixel-title" style="color: #ff3333; text-shadow: 0 0 20px rgba(255,0,0,0.5);">DERROTA</div>
        <div id="gameOverStats" style="font-family:'Press Start 2P'; font-size: 12px; color: #fff; margin-bottom: 30px; line-height: 1.8;"></div>
        <button class="btn" onclick="returnToMenu()">VOLTAR PARA TELA INICIAL</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- Filtro Metaball (Goo) para o Inimigo Slime -->
    <svg width="0" height="0" style="position:absolute">
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"/>
        <feColorMatrix in="blur" mode="matrix"
          values="
            1 0 0 0 0
            0 1 0 0 0
            0 0 1 0 0
            0 0 0 22 -10"
          result="goo"/>
        <feComposite in="SourceGraphic" in2="goo" operator="atop"/>
      </filter>
    </svg>

    <script src="js/config.js"></script>
    <script src="js/items.js"></script>
    <script src="js/enemies.js"></script>
    <script src="js/player.js"></script>
    <script src="js/engine.js"></script>
</body>
</html>